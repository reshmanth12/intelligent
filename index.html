<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Boy Going Home Animation</title>
<style>
  body {
    display: flex;
    flex-direction: column;
    align-items: center;
    font-family: Arial, sans-serif;
    background: #eef2f3;
    margin-top: 20px;
  }

  .grid {
    position: relative;
    width: 315px;
    height: 315px;
    display: grid;
    grid-template-columns: repeat(3, 100px);
    grid-template-rows: repeat(3, 100px);
    gap: 5px;
    background: #999;
    padding: 5px;
  }

  .cell {
    background: white;
    border: 2px solid #666;
    position: relative;
  }

  .cell.visited {
    background: #d3e5ff; /* highlight color for path */
  }

  .boy {
    position: absolute;
    width: 60px;
    height: 60px;
    transition: top 0.8s ease, left 0.8s ease;
  }

  .boy.walking {
    animation: bounce 0.4s ease-in-out infinite;
  }

  @keyframes bounce {
    0%, 100% { transform: translateY(0); }
    50% { transform: translateY(-5px); }
  }

  .house {
    position: absolute;
    width: 80px;
    height: 80px;
    bottom: 10px;
    left: 10px;
  }

  .controls {
    margin-top: 20px;
  }

  button {
    margin: 4px;
    padding: 8px 16px;
    cursor: pointer;
  }

  #commandsList {
    margin-top: 10px;
    font-weight: bold;
  }
</style>
</head>
<body>

<h2>üè† Boy Going Home Animation</h2>

<div class="grid" id="grid">
  <!-- 9 cells -->
  <div class="cell" id="cell-0"></div>
  <div class="cell" id="cell-1"></div>
  <div class="cell" id="cell-2"></div>
  <div class="cell" id="cell-3"></div>
  <div class="cell" id="cell-4"></div>
  <div class="cell" id="cell-5"></div>
  <div class="cell" id="cell-6"></div>
  <div class="cell" id="cell-7"></div>
  <div class="cell" id="cell-8"></div>

  <img src="boy_north.png" class="boy" id="boy" alt="Boy">
  <img src="house.png" class="house" id="house" alt="House">
</div>

<div class="controls">
  <button onclick="addCommand('turnLeft')">Turn Left</button>
  <button onclick="addCommand('turnRight')">Turn Right</button>
  <button onclick="addCommand('moveForward')">Move Forward</button>
  <button onclick="addCommand('moveBackward')">Move Backward</button>
  <button onclick="runCommands()">‚ñ∂ Run</button>
  <button onclick="reset()">üîÑ Reset</button>
</div>

<p id="commandsList">Commands: </p>

<script>
const boy = document.getElementById('boy');
const cells = [...document.querySelectorAll('.cell')];

let commands = [];

// Directions: 0 = North, 1 = East, 2 = South, 3 = West
let facing = 0;
let pos = { row: 1, col: 1 }; // start center

const cellSize = 105;

const boyImages = [
  "boy_north.png",
  "boy_east.png",
  "boy_south.png",
  "boy_west.png"
];

// Set initial position
function setBoyPosition() {
  boy.style.top = `${pos.row * cellSize + 25}px`;
  boy.style.left = `${pos.col * cellSize + 25}px`;
  boy.src = boyImages[facing];
}
setBoyPosition();
highlightPath();

function addCommand(cmd) {
  commands.push(cmd);
  document.getElementById('commandsList').innerText = 'Commands: ' + commands.join(', ');
}

async function runCommands() {
  for (let cmd of commands) {
    await executeCommand(cmd);
  }
}

function reset() {
  commands = [];
  document.getElementById('commandsList').innerText = 'Commands: ';
  facing = 0;
  pos = { row: 1, col: 1 };
  cells.forEach(c => c.classList.remove('visited'));
  highlightPath();
  setBoyPosition();
}

function executeCommand(cmd) {
  return new Promise((resolve) => {
    setTimeout(() => {
      if (cmd === 'turnLeft') {
        facing = (facing + 3) % 4;
        boy.src = boyImages[facing];
      } else if (cmd === 'turnRight') {
        facing = (facing + 1) % 4;
        boy.src = boyImages[facing];
      } else if (cmd === 'moveForward') {
        move(1);
      } else if (cmd === 'moveBackward') {
        move(-1);
      }
      resolve();
    }, 1000);
  });
}

function move(direction) {
  boy.classList.add('walking');
  if (facing === 0) pos.row -= direction;
  if (facing === 1) pos.col += direction;
  if (facing === 2) pos.row += direction;
  if (facing === 3) pos.col -= direction;
  pos.row = Math.max(0, Math.min(2, pos.row));
  pos.col = Math.max(0, Math.min(2, pos.col));
  setBoyPosition();
  highlightPath();
  setTimeout(() => boy.classList.remove('walking'), 800);
}

function highlightPath() {
  const index = pos.row * 3 + pos.col;
  cells[index].classList.add('visited');
}
</script>

</body>
</html>
